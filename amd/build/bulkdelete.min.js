define(["jquery","core/modal_factory","core/modal_events"],function(a,b,c){return{init:function(){function d(d){var e=a("#create-modal");b.create({type:b.types.SAVE_CANCEL,title:d.title,body:d.body},e).done(function(a){a.setSaveButtonText(d.save_button),a.getRoot().on(c.save,function(){d.next()}),a.show()})}function e(){for(var a=document.forms.form.elements,b=new Array,c=0;c<a.length;c++){var d=a[c];"checkbox"==d.type&&d.name.match(/^delete\b/)&&b.push(d)}return b}function f(){for(var a=e(),b=0;b<a.length;b++)a[b].checked=g.checked;document.forms.form.elements.delete_checked.disabled=!g.checked}function g(){for(var a=document.forms.form.elements.delete_checked,b=e(),c=0;c<b.length;c++)if(b[c].checked)return void(a.disabled=!1);a.disabled=!0}a(".bulk-delete-item [id^=delete]").on("click",function(){g()}),a(".bulk-delete-select-all input").on("click",function(){f()}),a(".form_submit").on("click",function(){d({title:"title_str",body:"body_str",save_button:"Save",next:function(){a("#form").submit()}})})}}});