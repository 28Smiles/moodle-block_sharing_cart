define(["jquery","core/modal_factory","core/modal_events"],function(a,b,c){return{init:function(){function d(a){return M.str.block_sharing_cart[a]||M.str.moodle[a]}function e(d){var e=a("#create-modal");b.create({type:b.types.SAVE_CANCEL,title:d.title,body:d.body},e).done(function(a){a.setSaveButtonText(d.save_button),a.getRoot().on(c.save,function(){d.next()}),a.show()})}function f(){for(var a=document.forms.form.elements,b=new Array,c=0;c<a.length;c++){var d=a[c];"checkbox"==d.type&&d.name.match(/^delete\b/)&&b.push(d)}return b}function g(a){for(var b=f(),c=0;c<b.length;c++)b[c].checked=a.checked;document.forms.form.elements.delete_checked.disabled=!a.checked}function h(){for(var a=document.forms.form.elements.delete_checked,b=f(),c=0;c<b.length;c++)if(b[c].checked)return void(a.disabled=!1);a.disabled=!0}a(".bulk-delete-item [id^=delete]").on("click",function(){h()}),a(".bulk-delete-select-all input").on("click",function(){g(this)}),a(".form_submit").on("click",function(){var b="<ul>",c=a(".bulk-delete-item input:checked");a(c).each(function(){var c=a('label[for="'+this.id+'"]');b+="<li>"+c.text()+"</li>"}),b+="</ul>",e({title:d("modal_bulkdelete_title"),body:b,save_button:d("modal_bulkdelete_confirm"),next:function(){a("#form").submit()}})})}}});